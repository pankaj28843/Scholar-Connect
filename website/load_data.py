import pickle
from main.models import *
import settings

from pymodules.google_scholar_search import GoogleScholarSearch
def load_professers():
    f = open('Authors.db', 'r')
    obj = pickle.load(f)

    for (key, value) in obj.iteritems():
        img_url = os.path.join(settings.MEDIA_ROOT, 'img/faces/',value['image'])
        try:
            p = Professor.objects.get(name=key)
            p = Professor(name=key, address=value['address'], university=value['university'], location=value['location'], domain=value['domain'], image=img_url)
        except:
            p = Professor(name=key, address=value['address'], university=value['university'], location=value['location'], domain=value['domain'], image=img_url)
        p.save()
        print p,"\n\n"

def load_confrence_profiles(conf_id=1, name='niloy ganguly', papers_count=100, start_year=2000):
    try:
        conf = Confrence.objects.get(pk=conf_id)
    except:
        return False
    prof_set = Professor.objects.all().filter(name=name)
    
    for prof in prof_set:
        co_auth = ''
        cite_auth = ''
        ref_auth = ''
        search = GoogleScholarSearch()
        papers = search.search([prof.name], papers_count, start_year, 2011)

        co_auth_set = []
        for p in papers:
            #print p['URL']
            co_auth_set.append(str(p['Details']['title'])+','+','.join(p['Details']['authors']))

            cite_auth_set = []
            for c in p['Citations']:
                cite_auth_set.append(str(c['title'])+','+','.join(c['authors']))
            cite_auth = cite_auth + ';'.join(cite_auth_set)
            print cite_auth
            #return False

            ref_auth_set = []
            for r in p['References']:
                ref_auth_set.append(str(r['title'])+','+','.join(r['authors']))
            ref_auth = ref_auth + ';'.join(ref_auth_set)

        co_auth = co_auth + ';'.join(co_auth_set)

        co_auth = co_auth.encode('ascii', 'ignore')
        cite_auth = cite_auth.encode('ascii', 'ignore')
        ref_auth = ref_auth.encode('ascii', 'ignore')

        try:
            cp = ConfrenceProfile.objects.get(professor = prof, confrence = conf)
            cp.co_authors = co_auth
            cp.cite_authors = cite_auth
            cp.ref_authors = ref_auth
            cp.save()
        except:
            cp = ConfrenceProfile(professor = prof, confrence = conf, co_authors = co_auth, cite_authors = cite_auth, ref_authors = ref_auth)
            cp.save()


def load_confrence_profiles_from_db():
    #f = open('crawl.db', 'r')
    #obj = pickle.load(f)
    obj = {'Fernando Peruani': [{'URL': u'http://portal.acm.org/citation.cfm?id=1315274', 'Citations': [{'title': u'How do superpeer networks emerge?', 'authors': [u'Bivas Mitra', u'Abhishek Kumar Dubey', u'Sujoy Ghose', u'Niloy Ganguly']}], 'References': [{'title': u'The Size of the Giant Component of a Random Graph with a Given Degree Sequence', 'authors': [u'Michael Molloy', u'Bruce Reed']}, {'title': u'Constructing a Balanced, (log(N)/loglog(N))-Diameter Super-Peer Topology for Scalable P2P Systems', 'authors': [u'Young June Pyun', u'Douglas S. Reeves']}], 'Details': {'title': u'Analyzing the vulnerability of superpeer networks against attack', 'authors': [u'Bivas Mitra', u'Fernando Peruani', u'Sujoy Ghose', u'Niloy Ganguly']}}, {'URL': u'http://portal.acm.org/citation.cfm?id=1281179', 'Citations': [{'title': u'How do superpeer networks emerge?', 'authors': [u'Bivas Mitra', u'Abhishek Kumar Dubey', u'Sujoy Ghose', u'Niloy Ganguly']}], 'References': [{'title': u'Measuring and analyzing the characteristics of Napster and Gnutella hosts', 'authors': [u'Stefan Saroiu', u'Krishna P. Gummadi', u'Steven D. Gribble']}], 'Details': {'title': u'Measuring robustness of superpeer topologies', 'authors': [u'Bivas Mitra', u'Fernando Peruani', u'Sujoy Ghose', u'Niloy Ganguly']}}], 'niloy ganguly': [{'URL': u'http://portal.acm.org/citation.cfm?id=1152937', 'Citations': [{'title': u'Myopic distributed protocols for singleton and independent-resource congestion games', 'authors': [u'D. Kalles', u'A. C. Kaporis', u'P. G. Spirakis']}, {'title': u'Bio-inspired multi-agent data harvesting in a proactive urban monitoring environment', 'authors': [u'Uichin Lee', u'Eugenio Magistretti', u'Mario Gerla', u'Paolo Bellavista', u'Pietro Lio', u'Kang-Won Lee']}, {'title': u'Phero-Trail: a bio-inspired location service for mobile underwater sensor networks', 'authors': [u'Luiz Filipe M. Vieira', u'Uichin Lee', u'Mario Gerla']}, {'title': u'Autonomous Querying for Knowledge Networks', 'authors': [u'Kieran Greer', u'Matthias Baumgarten', u'Chris Nugent', u'Maurice Mulvenna', u'Kevin Curran']}, {'title': u'Policy-constrained bio-inspired processes for autonomic route management', 'authors': [u'Sasitharan Balasubramaniam', u'Dmitri Botvich', u'Brendan Jennings', u'Steven Davy', u'William Donnelly', u'John Strassner']}, {'title': u'Biochemical Tuple Spaces for Self-organising Coordination', 'authors': [u'Mirko Viroli', u'Matteo Casadei']}, {'title': u'A biochemical metaphor for developing eternally adaptive service ecosystems', 'authors': [u'Mirko Viroli', u'Matteo Casadei', u'Sara Montagna', u'Franco Zambonelli']}, {'title': u'Design Patterns for Self-organising Systems', 'authors': [u'Luca Gardelli', u'Mirko Viroli', u'Andrea Omicini']}, {'title': u'Towards consistency of policy states in decentralized autonomic network management', 'authors': [u'Jeferson Campos Nobre', u'Lisandro Zambenedetti Granville']}, {'title': u'Using chemical reactions to model service composition', 'authors': [u'Claudia Di Napoli', u'Maurizio Giordano', u'Zsolt Nemeth', u'Nicola Tonellotto']}, {'title': u'Using group selection to evolve leadership in populations of self-replicating digital organisms', 'authors': [u'David B. Knoester', u'Philip K. McKinley', u'Charles A. Ofria']}, {'title': u'Bottom-up design patterns and the energy web', 'authors': [u'Iacopo Carreras', u'Daniele Miorandi', u'Regis Saint-Paul', u'Imrich Chlamtac']}, {'title': u'Run-time adaptive on-chip communication scheme', 'authors': [u'Mohammad Abdullah Al Faruque', u'Thomas Ebi', u'Jorg Henkel']}, {'title': u'Use of MaSE methodology for designing a swarm-based multi-agent system', 'authors': [u'Dariusz Krol', u'Maciej Dro\u017cd\u017cowski']}, {'title': u'Designing self&#45;organising environments with agents and artefacts&#58; a simulation&#45;driven approach', 'authors': [u'Luca Gardelli', u'Mirko Viroli', u'Matteo Casadei', u'Andrea Omicini']}, {'title': u'Evolving quorum sensing in digital organisms', 'authors': [u'Benjamin E. Beckmann', u'Philip K. McKinley']}, {'title': u'Innovative directions in self-organized distributed multimedia systems', 'authors': []}, {'title': u'Programming pervasive and mobile computing applications: The TOTA approach', 'authors': [u'Marco Mamei', u'Franco Zambonelli']}, {'title': u'Design patterns for decentralised coordination in self-organising emergent systems', 'authors': [u'Tom De Wolf', u'Tom Holvoet']}, {'title': u'Self-organized control of knowledge generation in pervasive computing systems', 'authors': [u'Gabriella Castelli', u'Ronaldo Menezes', u'Franco Zambonelli']}, {'title': u'BiRSM: bio-inspired resource self-management for all IP-networks', 'authors': [u'Sasitharan Balasubramaniam', u'Dmitri Botvich', u'Julien Mineraud', u'William Donnelly', u'Nazim Agoulmine']}, {'title': u'Phero-trail: a bio-inspired location service for mobile underwater sensor networks', 'authors': [u'Luiz Filipe M. Vieira', u'Uichin Lee', u'Mario Gerla']}, {'title': u'Towards a pervasive infrastructure for chemical-inspired self-organising services', 'authors': [u'Mirko Viroli', u'Matteo Casadei', u'Elena Nardini', u'Andrea Omicini']}, {'title': u'Insect sensory systems inspired computing and communications', 'authors': [u'Zhanshan (Sam) Ma', u'Axel W. Krings']}, {'title': u'Autonomic communication services: a new challenge for software agents', 'authors': [u'Raffaele Quitadamo', u'Franco Zambonelli']}, {'title': u'Autonomic and cognitive possibilities for information or neural-like systems using dynamic links', 'authors': [u'Kieran Greer', u'Matthias Baumgarten', u'Maurice Mulvenna', u'Kevin Curran', u'Chris Nugent']}, {'title': u'Autonomic and cognitive possibilities for information or neural-like systems using dynamic links', 'authors': [u'Kieran Greer', u'Matthias Baumgarten', u'Maurice Mulvenna', u'Kevin Curran', u'Chris Nugent']}, {'title': u'Interdisciplinary issues for the management of next generation autonomic wireless systems&#58; nature&#45;inspired techniques and organic computing', 'authors': [u'Floriano De Rango', u'Fiore Veltri', u'Mauro Tropea', u'Amilcare-Francesco Santamaria', u'Peppino Fazio', u'Andrea Malfitano', u'Salvatore Marano']}, {'title': u'A group selection pattern for agent-based virtual organizations coordination in grids', 'authors': [u'Isaac Chao', u'Oscar Ardaiz', u'Ramon Sanguesa']}, {'title': u'Digitally Evolving Models for Dynamically Adaptive Systems', 'authors': [u'Heather J. Goldsby', u'David B. Knoester', u'Betty H. C. Cheng', u'Philip K. McKinley', u'Charles A. Ofria']}, {'title': u'Towards nature-inspired pervasive service ecosystems: Concepts and simulation experiences', 'authors': []}, {'title': u'Simulation experiences with an ecological approach for pervasive service systems', 'authors': [u'Cynthia Villalba', u'Franco Zambonelli']}, {'title': u'A biochemical approach to adaptive service ecosystems', 'authors': [u'Mirko Viroli', u'Franco Zambonelli']}, {'title': u'Bio-inspired Search and Distributed Memory Formation on Power-Law Networks', 'authors': [u'Tathagata Das', u'Subrata Nandi', u'Andreas Deutsch', u'Niloy Ganguly']}, {'title': u'Properties and mechanisms of self-organizing MANET and P2P systems', 'authors': [u'Bartosz Biskupski', u'Jim Dowling', u'Jan Sacha']}, {'title': u'Perspectives and challenges of agent-based simulation as a tool for economics and other social sciences', 'authors': [u'Klaus G. Troitzsch']}, {'title': u'A taxonomy of biologically inspired research in computer networking', 'authors': [u'Michael Meisel', u'Vasileios Pappas', u'Lixia Zhang']}, {'title': u'A journey to highly dynamic, self-adaptive service-based applications', 'authors': [u'Elisabetta Di Nitto', u'Carlo Ghezzi', u'Andreas Metzger', u'Mike Papazoglou', u'Klaus Pohl']}, {'title': u'Designing modular architectures in the framework AKIRA', 'authors': [u'Giovanni Pezzulo', u'Gianguglielmo Calvi']}, {'title': u'Robustness and Dependability of Self-Organizing Systems - A Safety Engineering Perspective', 'authors': []}, {'title': u'Detecting diseases in farm animals with embedded system', 'authors': [u'Jingyu Zhang', u'Rafael Calvo', u'Richard Shephard', u'Craig Jin']}, {'title': u'Directed evolution of communication and cooperation in digital organisms', 'authors': [u'David B. Knoester', u'Philip K. McKinley', u'Benjamin Beckmann', u'Charles Ofria']}, {'title': u'Consistency of States of Management Data in P2P-Based Autonomic Network Management', 'authors': []}, {'title': u'Self-adaptive software: Landscape and research challenges', 'authors': [u'Mazeiar Salehie', u'Ladan Tahvildari']}, {'title': u'Handling dynamics in diffusive aggregation schemes: An evaporative approach', 'authors': [u'Nicola Bicocchi', u'Marco Mamei', u'Franco Zambonelli']}, {'title': u'Community formation and search in P2P: a robust and self-adjusting algorithm', 'authors': [u'Tathagata Das', u'Subrata Nandi', u'Niloy Ganguly']}, {'title': u'A self-organizing architecture for pervasive ecosystems', 'authors': [u'Cynthia Villalba', u'Marco Mamei', u'Franco Zambonelli']}, {'title': u'Routing and wavelength assignment with crankback re-routing extensions by means of ant colony optimization', 'authors': [u'Gustavo Sousa Pavani', u'Helio Waldman']}, {'title': u'Fitting genetic algorithms to distributed on-line evolution of network protocols', 'authors': [u'Sara Alouf', u'Giovanni Neglia', u'Iacopo Carreras', u'Daniele Miorandi', u'\xc1lvaro Fialho']}, {'title': u'A bio-inspired algorithm for energy optimization in a self-organizing data center', 'authors': [u'Donato Barbagallo', u'Elisabetta Di Nitto', u'Daniel J. Dubois', u'Raffaela Mirandola']}, {'title': u'Engineering of Software-Intensive Systems: State of the Art and Research Challenges', 'authors': [u'Matthias Holzl', u'Axel Rauschmayer', u'Martin Wirsing']}], 'References': [{'title': u'Amorphous computing', 'authors': [u'Harold Abelson', u'Don Allen', u'Daniel Coore', u'Chris Hanson', u'George Homsy', u'Thomas F. Knight, Jr.', u'Radhika Nagpal', u'Erik Rauch', u'Gerald Jay Sussman', u'Ron Weiss']}, {'title': u'Reaction-Diffusion Computers', 'authors': [u'Andrew Adamatzky', u'Benjamin De Lacy Costello', u'Tetsuya Asai']}, {'title': u'Data networks', 'authors': [u'Dimitri Bertsekas', u'Robert Gallager']}, {'title': u'The Node Distribution of the Random Waypoint Mobility Model for Wireless Ad Hoc Networks', 'authors': [u'Christian Bettstetter', u'Giovanni Resta', u'Paolo Santi']}, {'title': u'Load balancing and Poisson equation in a graph', 'authors': [u'J. E. Boillat']}, {'title': u'Self-Organization in Biological Systems', 'authors': [u'Scott Camazine', u'Nigel R. Franks', u'James Sneyd', u'Eric Bonabeau', u'Jean-Louis Deneubourg', u'Guy Theraula']}, {'title': u'Making gnutella-like P2P systems scalable', 'authors': [u'Yatin Chawathe', u'Sylvia Ratnasamy', u'Lee Breslau', u'Nick Lanham', u'Scott Shenker']}, {'title': u'Dynamic load balancing for distributed memory multiprocessors', 'authors': [u'G. Cybenko']}, {'title': u'Epidemic algorithms for replicated database maintenance', 'authors': [u'Alan Demers', u'Dan Greene', u'Carl Hauser', u'Wes Irish', u'John Larson', u'Scott Shenker', u'Howard Sturgis', u'Dan Swinehart', u'Doug Terry']}, {'title': u'Engineering Self-Organising Systems', 'authors': [u'Giovanna Di Marzo Serugendo', u'Anthony Karageorgos', u'Omer F. Rana', u'Franco Zambonelli']}, {'title': u'Ant algorithms for discrete optimization', 'authors': [u'Marco Dorigo', u'Gianni Di Caro', u'Luca M. Gambardella']}, {'title': u'Ant Colony Optimization', 'authors': [u'Marco Dorigo', u'Thomas Stutzle']}, {'title': u'Ant Agents for Hybrid Multipath Routing in Mobile Ad Hoc Networks', 'authors': [u'Frederick Ducatelle', u'Gianni Di Caro', u'Luca Maria Gambardella']}, {'title': u'Introduction to Evolutionary Computing', 'authors': [u'Agoston E. Eiben', u'J. E. Smith']}, {'title': u"Stigmergic Learning for Self-Organizing Mobile Ad-Hoc Networks (MANET's)", 'authors': [u'H. Van Dyke Parunak', u'Sven A. Brueckner']}, {'title': u'Neural Networks: A Comprehensive Foundation', 'authors': [u'Simon Haykin']}, {'title': u'Cellular Automata: A Discrete Universe', 'authors': [u'Andrew Ilachinski', u'Zane']}, {'title': u'The peer sampling service: experimental evaluation of unstructured gossip-based implementations', 'authors': [u'Mark Jelasity', u'Rachid Guerraoui', u'Anne-Marie Kermarrec', u'Maarten van Steen']}, {'title': u'Gossip-based aggregation in large dynamic networks', 'authors': [u'Mark Jelasity', u'Alberto Montresor', u'Ozalp Babaoglu']}, {'title': u'Gossip-Based Computation of Aggregate Information', 'authors': [u'David Kempe', u'Alin Dobra', u'Johannes Gehrke']}, {'title': u'The Vision of Autonomic Computing', 'authors': [u'Jeffrey O. Kephart', u'David M. Chess']}, {'title': u'Artificial Life', 'authors': [u'Christopher G. Langton']}, {'title': u'Document Ranking and the Vector-Space Model', 'authors': [u'Dik L. Lee', u'Huei Chuang', u'Kent Seamons']}, {'title': u"The Hitchhiker's Guide to Biomorphic Software", 'authors': [u'Kenneth N Lodding']}, {'title': u'Search and replication in unstructured peer-to-peer networks', 'authors': [u'Qin Lv', u'Pei Cao', u'Edith Cohen', u'Kai Li', u'Scott Shenker']}, {'title': u'Exact algorithms for the minimum power symmetric connectivity problem in wireless networks', 'authors': [u'R. Montemanni', u'L. M. Gambardella']}, {'title': u'Global convergence of local agent behaviors', 'authors': [u'H. Van Dyke Parunak', u'Sven A. Brueckner', u'John A. Sauter', u'Robert Matthews']}, {'title': u'Ad-hoc On-Demand Distance Vector Routing', 'authors': [u'Charles E. Perkins', u'Elizabeth M. Royer']}, {'title': u'Software patterns', 'authors': [u'Douglas C. Schmidt', u'Mohamed Fayad', u'Ralph E. Johnson']}, {'title': u'Ant-based load balancing in telecommunications networks', 'authors': [u'Ruud Schoonderwoerd', u'Janet L. Bruten', u'Owen E. Holland', u'Leon J. M. Rothkrantz']}, {'title': u'Neurons, Viscose Fluids, Freshwater Polyp Hydra-and Self-Organizing Information Systems', 'authors': [u'Steffen Staab', u'Francis Heylighen', u'Carlos Gershenson', u'Gary William Flake', u'David M. Pennock', u'Daniel C. Fain', u'David De Roure', u'Karl Aberer', u'Wei-Min Shen', u'Olivier Dousse', u'Patrick Thiran']}, {'title': u'Introduction to Reinforcement Learning', 'authors': [u'Richard S. Sutton', u'Andrew G. Barto']}, {'title': u'A brief history of stigmergy', 'authors': [u'Guy Theraulaz', u'Eric Bonbeau']}, {'title': u'Astrolabe: A robust and scalable technology for distributed system monitoring, management, and data mining', 'authors': [u'Robbert Van Renesse', u'Kenneth P. Birman', u'Werner Vogels']}], 'Details': {'title': u'Design patterns from biology for distributed computing', 'authors': [u'Ozalp Babaoglu', u'Geoffrey Canright', u'Andreas Deutsch', u'Gianni A. Di Caro', u'Frederick Ducatelle', u'Luca M. Gambardella', u'Niloy Ganguly', u'Mark Jelasity', u'Roberto Montemanni', u'Alberto Montresor', u'Tore Urnes']}}, {'URL': u'http://portal.acm.org/citation.cfm?id=1367646', 'Citations': [{'title': u'A Web Recommender System for Recommending, Predicting and Personalizing Music Playlists', 'authors': []}, {'title': u'Selecting keywords for content based recommendation', 'authors': [u'Christian Wartena', u'Wout Slakhorst', u'Martin Wibbels']}, {'title': u'Enhancing recommender systems under volatile userinterest drifts', 'authors': [u'Huanhuan Cao', u'Enhong Chen', u'Jie Yang', u'Hui Xiong']}, {'title': u'Choosing attribute weights for item dissimilarity using clikstream data with an application to a product catalog map', 'authors': [u'Martijn Kagie', u'Michiel van Wezel', u'Patrick J.F. Groenen']}], 'References': [{'title': u'Hybrid Recommender Systems: Survey and Experiments', 'authors': [u'Robin Burke']}, {'title': u'Content-boosted collaborative filtering for improved recommendations', 'authors': [u'Prem Melville', u'Raymod J. Mooney', u'Ramadass Nagarajan']}], 'Details': {'title': u'Feature weighting in content based recommendation system using social network analysis', 'authors': [u'Souvik Debnath', u'Niloy Ganguly', u'Pabitra Mitra']}}, {'URL': u'http://portal.acm.org/citation.cfm?id=1273090', 'Citations': [{'title': u'Emergence of community structures in vowel inventories: an analysis based on complex networks', 'authors': [u'Animesh Mukherjee', u'Monojit Choudhury', u'Anupam Basu', u'Niloy Ganguly']}, {'title': u'Discovering global patterns in linguistic networks through spectral analysis: a case study of the consonant inventories', 'authors': [u'Animesh Mukherjee', u'Monojit Choudhury', u'Ravi Kannan']}, {'title': u'Modeling the structure and dynamics of the consonant inventories: a complex network approach', 'authors': [u'Animesh Mukherjee', u'Monojit Choudhury', u'Anupam Basu', u'Niloy Ganguly']}, {'title': u'Language diversity across the consonant inventories: a study in the framework of complex networks', 'authors': [u'Monojit Choudhury', u'Animesh Mukherjee', u'Anupam Basu', u'Niloy Ganguly', u'Ashish Garg', u'Vaibhav Jalan']}], 'References': [], 'Details': {'title': u'Analysis and synthesis of the distribution of consonants over languages: a complex network approach', 'authors': [u'Monojit Choudhury', u'Animesh Mukherjee', u'Anupam Basu', u'Niloy Ganguly']}}, {'URL': u'http://portal.acm.org/citation.cfm?id=1315274', 'Citations': [{'title': u'How do superpeer networks emerge?', 'authors': [u'Bivas Mitra', u'Abhishek Kumar Dubey', u'Sujoy Ghose', u'Niloy Ganguly']}], 'References': [{'title': u'The Size of the Giant Component of a Random Graph with a Given Degree Sequence', 'authors': [u'Michael Molloy', u'Bruce Reed']}, {'title': u'Constructing a Balanced, (log(N)/loglog(N))-Diameter Super-Peer Topology for Scalable P2P Systems', 'authors': [u'Young June Pyun', u'Douglas S. Reeves']}], 'Details': {'title': u'Analyzing the vulnerability of superpeer networks against attack', 'authors': [u'Bivas Mitra', u'Fernando Peruani', u'Sujoy Ghose', u'Niloy Ganguly']}}, {'URL': u'http://portal.acm.org/citation.cfm?id=1863200', 'Citations': [], 'References': [{'title': u'Scale-Free Overlay Topologies with Hard Cutoffs for Unstructured Peer-to-Peer Networks', 'authors': [u'Hasan Guclu', u'Murat Yuksel']}, {'title': u'Why we twitter: understanding microblogging usage and communities', 'authors': [u'Akshay Java', u'Xiaodan Song', u'Tim Finin', u'Belle Tseng']}, {'title': u'A few chirps about twitter', 'authors': [u'Balachander Krishnamurthy', u'Phillipa Gill', u'Martin Arlitt']}, {'title': u'Structure and evolution of online social networks', 'authors': [u'Ravi Kumar', u'Jasmine Novak', u'Andrew Tomkins']}, {'title': u'Growth of the flickr social network', 'authors': [u'Alan Mislove', u'Hema Swetha Koppula', u'Krishna P. Gummadi', u'Peter Druschel', u'Bobby Bhattacharjee']}, {'title': u'How do superpeer networks emerge?', 'authors': [u'Bivas Mitra', u'Abhishek Kumar Dubey', u'Sujoy Ghose', u'Niloy Ganguly']}], 'Details': {'title': u'The effects of restrictions on number of connections in OSNs: a case-study on twitter', 'authors': []}}], 'Bivas Mitra': [{'URL': u'http://portal.acm.org/citation.cfm?id=1315274', 'Citations': [{'title': u'How do superpeer networks emerge?', 'authors': [u'Bivas Mitra', u'Abhishek Kumar Dubey', u'Sujoy Ghose', u'Niloy Ganguly']}], 'References': [{'title': u'The Size of the Giant Component of a Random Graph with a Given Degree Sequence', 'authors': [u'Michael Molloy', u'Bruce Reed']}, {'title': u'Constructing a Balanced, (log(N)/loglog(N))-Diameter Super-Peer Topology for Scalable P2P Systems', 'authors': [u'Young June Pyun', u'Douglas S. Reeves']}], 'Details': {'title': u'Analyzing the vulnerability of superpeer networks against attack', 'authors': [u'Bivas Mitra', u'Fernando Peruani', u'Sujoy Ghose', u'Niloy Ganguly']}}, {'URL': u'http://portal.acm.org/citation.cfm?id=1281179', 'Citations': [{'title': u'How do superpeer networks emerge?', 'authors': [u'Bivas Mitra', u'Abhishek Kumar Dubey', u'Sujoy Ghose', u'Niloy Ganguly']}], 'References': [{'title': u'Measuring and analyzing the characteristics of Napster and Gnutella hosts', 'authors': [u'Stefan Saroiu', u'Krishna P. Gummadi', u'Steven D. Gribble']}], 'Details': {'title': u'Measuring robustness of superpeer topologies', 'authors': [u'Bivas Mitra', u'Fernando Peruani', u'Sujoy Ghose', u'Niloy Ganguly']}}, {'URL': u'http://portal.acm.org/citation.cfm?id=1782225', 'Citations': [], 'References': [{'title': u'Search and replication in unstructured peer-to-peer networks', 'authors': [u'Qin Lv', u'Pei Cao', u'Edith Cohen', u'Kai Li', u'Scott Shenker']}, {'title': u'Constructing a Balanced, (log(N)/loglog(N))-Diameter Super-Peer Topology for Scalable P2P Systems', 'authors': [u'Young June Pyun', u'Douglas S. Reeves']}, {'title': u'Characterizing unstructured overlay topologies in modern P2P file-sharing systems', 'authors': [u'Daniel Stutzbach', u'Reza Rejaie', u'Subhabrata Sen']}, {'title': u'A Robust Protocol for Building Superpeer Overlay Topologies', 'authors': [u'Alberto Montresor']}, {'title': u'The Size of the Giant Component of a Random Graph with a Given Degree Sequence', 'authors': [u'Michael Molloy', u'Bruce Reed']}], 'Details': {'title': u'Effect of dynamicity on peer to peer networks', 'authors': [u'Bivas Mitra', u'Sujoy Ghose', u'Niloy Ganguly']}}]}
    conf_id=1
    conf = Confrence.objects.get(pk=conf_id)

    for v in obj.keys():
        prof = Professor.objects.get(name=v)
        
        co_auth = ''
        cite_auth = ''
        ref_auth = ''
        papers = obj[v]
        co_auth_set = []
        for p in papers:
            #print p['URL']
            co_auth_set.append(str(p['Details']['title'])+','+','.join(p['Details']['authors']))

            cite_auth_set = []
            for c in p['Citations']:
                cite_auth_set.append(str(c['title'])+','+','.join(c['authors']))
            cite_auth = cite_auth + ';'.join(cite_auth_set)
            print cite_auth
            #return False

            ref_auth_set = []
            for r in p['References']:
                ref_auth_set.append(str(r['title'])+','+','.join(r['authors']))
            ref_auth = ref_auth + ';'.join(ref_auth_set)

        co_auth = co_auth + ';'.join(co_auth_set)

        co_auth = co_auth.encode('ascii', 'ignore')
        cite_auth = cite_auth.encode('ascii', 'ignore')
        ref_auth = ref_auth.encode('ascii', 'ignore')

        try:
            cp = ConfrenceProfile.objects.get(professor = prof, confrence = conf)
            cp.co_authors = co_auth
            cp.cite_authors = cite_auth
            cp.ref_authors = ref_auth
            cp.save()
        except:
            cp = ConfrenceProfile(professor = prof, confrence = conf, co_authors = co_auth, cite_authors = cite_auth, ref_authors = ref_auth)
            cp.save()
